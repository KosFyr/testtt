<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Παιχνίδι Προγραμματισμού</title>
  <style>
    body {
      font-family: 'Comic Sans MS', Arial, sans-serif;
      background-color: #e0f7fa;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: #333;
    }

    .container {
      text-align: center;
      max-width: 1024px;
      padding: 20px;
    }

    .hidden {
      display: none;
      opacity: 0;
    }

    .visible {
      display: block;
      opacity: 1;
      transition: opacity 0.5s ease;
    }

    button {
      color: white;
      border: none;
      padding: 12px 24px;
      margin: 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    /* Home Screen */
    #home-screen h1 {
      font-size: 48px;
      color: #0288d1;
      text-shadow: 2px 2px #fff;
    }

    #home-screen button {
      background-color: #f57c00;
    }

    #home-screen button:hover {
      background-color: #ef6c00;
    }

    /* Avatar Selection Screen */
    #avatar-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .avatar-container {
      display: flex;
      justify-content: space-around;
      width: 100%;
      margin: 20px 0;
    }

    .avatar {
      width: 100px;
      height: 100px;
      position: relative;
      cursor: pointer;
      transition: transform 0.2s;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 60px;
      border-radius: 50%;
      border: 3px solid #333;
      background-color: #fff;
    }

    .avatar:hover {
      transform: scale(1.1);
    }

    /* Emoji-based Avatars */
    .avatar-bito::before {
      content: '🧑‍🎓';
    }

    .avatar-byte::before {
      content: '👧';
    }

    .avatar-bugsy::before {
      content: '🤖';
    }

    #player-name {
      padding: 10px;
      font-size: 16px;
      margin: 10px;
      border-radius: 5px;
      border: 2px solid #0288d1;
    }

    #avatar-screen button {
      background-color: #f57c00;
    }

    #avatar-screen button:hover {
      background-color: #ef6c00;
    }

    /* Game Screen */
    #game-screen {
      position: relative;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(5, 100px);
      gap: 10px;
      margin: 20px auto;
      background-color: #a5d6a7;
      padding: 20px;
      border-radius: 10px;
      position: relative;
      width: 540px;
      height: 340px;
    }

    .square {
      width: 100px;
      height: 100px;
      background-color: #81c784;
      border: 2px solid #388e3c;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      color: #fff;
      text-shadow: 1px 1px #333;
      position: absolute;
      transition: all 0.5s ease;
    }

    .player {
      width: 50px;
      height: 50px;
      position: absolute;
      transition: all 0.5s ease;
      font-size: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 50%;
      background-color: #fff;
      border: 2px solid #333;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    .bounce {
      animation: bounce 0.3s ease;
    }

    #question {
      font-size: 24px;
      margin: 20px 0;
      color: #0288d1;
      background-color: #fff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    #question-type {
      font-size: 18px;
      color: #d81b60;
      margin-bottom: 10px;
    }

    .options {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }

    .option-true {
      background-color: #4caf50;
    }

    .option-true:hover {
      background-color: #45a049;
    }

    .option-false {
      background-color: #d32f2f;
    }

    .option-false:hover {
      background-color: #c62828;
    }

    .option-dropdown {
      padding: 10px;
      font-size: 16px;
      border-radius: 5px;
      border: 2px solid #0288d1;
      width: 300px;
    }

    #options button {
      background-color: #0288d1;
    }

    #options button:hover {
      background-color: #0277bd;
    }

    #feedback {
      font-size: 20px;
      margin: 10px 0;
      color: #d81b60;
    }

    #score {
      font-size: 18px;
      color: #388e3c;
    }

    /* End Screen */
    #end-screen h2 {
      font-size: 36px;
      color: #d81b60;
      text-shadow: 2px 2px #fff;
    }

    #end-score {
      font-size: 24px;
      color: #0288d1;
    }

    #end-screen button.replay {
      background-color: #2e7d32;
    }

    #end-screen button.replay:hover {
      background-color: #27632a;
    }

    #end-screen button.home {
      background-color: #0288d1;
    }

    #end-screen button.home:hover {
      background-color: #0277bd;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Home Screen -->
    <div id="home-screen" class="visible">
      <h1>Παιχνίδι Προγραμματισμού</h1>
      <button onclick="showScreen('avatar-screen')">Έναρξη Παιχνιδιού</button>
    </div>

    <!-- Avatar Selection Screen -->
    <div id="avatar-screen" class="hidden">
      <h2>Επιλογή Avatar</h2>
      <div class="avatar-container">
        <div class="avatar avatar-bito" onclick="selectAvatar('bito')"></div>
        <div class="avatar avatar-byte" onclick="selectAvatar('byte')"></div>
        <div class="avatar avatar-bugsy" onclick="selectAvatar('bugsy')"></div>
      </div>
      <input type="text" id="player-name" placeholder="Εισάγετε όνομα (προαιρετικό)">
      <button onclick="startGame()">Ξεκίνα</button>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="hidden">
      <div class="board" id="board"></div>
      <div id="question-type"></div>
      <div id="question"></div>
      <div class="options" id="options"></div>
      <div id="feedback"></div>
      <div id="score"></div>
    </div>

    <!-- End Screen -->
    <div id="end-screen" class="hidden">
      <h2 id="end-message"></h2>
      <div id="end-score"></div>
      <button class="replay" onclick="showScreen('avatar-screen')">Ξαναπαίξε</button>
      <button class="home" onclick="showScreen('home-screen')">Αρχική</button>
    </div>
  </div>

  <script>
    const screens = ['home-screen', 'avatar-screen', 'game-screen', 'end-screen'];
    let selectedAvatar = '';
    let playerName = '';
    let currentPosition = 1;
    let correctAnswers = 0;
    let usedQuestions = [];
    let reachedEnd = false;

    const questions = [
      {
        type: 'true-false',
        question: 'Το αντικείμενο πρόγραμμα παράγεται από τον μεταγλωττιστή.',
        correct: true
      },
      {
        type: 'true-false',
        question: 'Σε ένα δυαδικό δένδρο κάθε κόμβος έχει 0, 1 ή 2 υποδένδρα.',
        correct: true
      },
      {
        type: 'true-false',
        question: 'Η ενθυλάκωση υποδηλώνει ότι οι εσωτερικές λειτουργίες ενός αντικειμένου είναι ορατές στον έξω κόσμο.',
        correct: false
      },
      {
        type: 'true-false',
        question: 'Η ώθηση ενός στοιχείου γίνεται στην κορυφή της στοίβας.',
        correct: true
      },
      {
        type: 'true-false',
        question: 'Το όχημα είναι υποκλάση του αυτοκινήτου.',
        correct: false
      },
      {
        type: 'matching',
        question: 'Παράλειψη δήλωσης μεταβλητής',
        options: ['Συντακτικό Λάθος', 'Λάθος κατά την εκτέλεση', 'Λογικό Λάθος'],
        correct: 'Συντακτικό Λάθος'
      },
      {
        type: 'matching',
        question: 'Εξαγωγή λανθασμένου αποτελέσματος',
        options: ['Συντακτικό Λάθος', 'Λάθος κατά την εκτέλεση', 'Λογικό Λάθος'],
        correct: 'Λογικό Λάθος'
      },
      {
        type: 'matching',
        question: 'Διαίρεση με το μηδέν (0)',
        options: ['Συντακτικό Λάθος', 'Λάθος κατά την εκτέλεση', 'Λογικό Λάθος'],
        correct: 'Λάθος κατά την εκτέλεση'
      },
      {
        type: 'matching',
        question: 'Καταχώριση από τον χρήστη γράμματος σε ακέραια μεταβλητή',
        options: ['Συντακτικό Λάθος', 'Λάθος κατά την εκτέλεση', 'Λογικό Λάθος'],
        correct: 'Λάθος κατά την εκτέλεση'
      },
      {
        type: 'matching',
        question: 'Όνομα μεταβλητής: 3Α',
        options: ['Συντακτικό Λάθος', 'Λάθος κατά την εκτέλεση', 'Λογικό Λάθος'],
        correct: 'Συντακτικό Λάθος'
      }
    ];

    const boardPositions = [
      { x: 20, y: 300 },  // 1
      { x: 120, y: 300 }, // 2
      { x: 220, y: 300 }, // 3
      { x: 320, y: 300 }, // 4
      { x: 420, y: 300 }, // 5
      { x: 420, y: 200 }, // 6
      { x: 320, y: 200 }, // 7
      { x: 220, y: 200 }, // 8
      { x: 120, y: 200 }, // 9
      { x: 20, y: 200 },  // 10
      { x: 20, y: 100 },  // 11
      { x: 120, y: 100 }, // 12
      { x: 220, y: 100 }, // 13
      { x: 320, y: 100 }, // 14
      { x: 420, y: 100 }  // 15
    ];

    function showScreen(screenId) {
      screens.forEach(screen => {
        const element = document.getElementById(screen);
        element.classList.remove('visible');
        element.classList.add('hidden');
      });
      const targetScreen = document.getElementById(screenId);
      targetScreen.classList.remove('hidden');
      setTimeout(() => {
        targetScreen.classList.add('visible');
      }, 10);
    }

    function selectAvatar(avatar) {
      selectedAvatar = avatar;
      document.querySelectorAll('.avatar').forEach(el => el.style.border = '3px solid #333');
      document.querySelector(`.avatar-${avatar}`).style.border = '3px solid #d81b60';
    }

    function startGame() {
      if (!selectedAvatar) {
        alert('Παρακαλώ επιλέξτε ένα avatar!');
        return;
      }
      playerName = document.getElementById('player-name').value || 'Παίκτης';
      currentPosition = 1;
      correctAnswers = 0;
      usedQuestions = [];
      reachedEnd = false;
      showScreen('game-screen');
      setupBoard();
      loadQuestion();
    }

    function setupBoard() {
      const board = document.getElementById('board');
      board.innerHTML = '';
      boardPositions.forEach((pos, index) => {
        const square = document.createElement('div');
        square.className = 'square';
        square.textContent = index + 1;
        square.style.left = `${pos.x}px`;
        square.style.top = `${pos.y}px`;
        square.style.backgroundColor = (index % 2 === 0) ? '#81c784' : '#66bb6a';
        board.appendChild(square);
      });
      const player = document.createElement('div');
      player.className = `player avatar-${selectedAvatar}`;
      player.style.left = `${boardPositions[0].x + 25}px`;
      player.style.top = `${boardPositions[0].y + 25}px`;
      board.appendChild(player);
    }

    function loadQuestion() {
      if (usedQuestions.length >= questions.length) {
        endGame();
        return;
      }

      let availableQuestions = questions.filter((_, index) => !usedQuestions.includes(index));
      if (availableQuestions.length === 0) {
        endGame();
        return;
      }

      const randomIndex = Math.floor(Math.random() * availableQuestions.length);
      const questionIndex = questions.indexOf(availableQuestions[randomIndex]);
      usedQuestions.push(questionIndex);
      const question = questions[questionIndex];

      document.getElementById('question-type').textContent = question.type === 'true-false' ? 'Σωστό/Λάθος' : 'Αντιστοίχιση';
      document.getElementById('question').textContent = question.question;
      const optionsDiv = document.getElementById('options');
      optionsDiv.innerHTML = '';

      if (question.type === 'true-false') {
        const trueButton = document.createElement('button');
        trueButton.className = 'option-true';
        trueButton.textContent = 'Σωστό';
        trueButton.onclick = () => checkAnswer(true, question);
        optionsDiv.appendChild(trueButton);

        const falseButton = document.createElement('button');
        falseButton.className = 'option-false';
        falseButton.textContent = 'Λάθος';
        falseButton.onclick = () => checkAnswer(false, question);
        optionsDiv.appendChild(falseButton);
      } else {
        const select = document.createElement('select');
        select.className = 'option-dropdown';
        select.innerHTML = '<option value="">Επιλέξτε...</option>';
        question.options.forEach(option => {
          const opt = document.createElement('option');
          opt.value = option;
          opt.textContent = option;
          select.appendChild(opt);
        });
        optionsDiv.appendChild(select);

        const submitButton = document.createElement('button');
        submitButton.textContent = 'Υποβολή';
        submitButton.onclick = () => checkAnswer(select.value, question);
        optionsDiv.appendChild(submitButton);
      }

      document.getElementById('feedback').textContent = '';
      document.getElementById('score').textContent = `Θέση: ${currentPosition} από 15 | Σωστές: ${correctAnswers}`;
    }

    function checkAnswer(selected, question) {
      let isCorrect = false;
      if (question.type === 'true-false') {
        isCorrect = selected === question.correct;
      } else {
        isCorrect = selected === question.correct;
      }

      document.getElementById('feedback').textContent = isCorrect ? 'Σωστά!' : 'Λάθος';
      if (isCorrect) {
        correctAnswers++;
        currentPosition += 2;
      }

      movePlayer();
    }

    function movePlayer() {
      if (currentPosition >= 15) {
        reachedEnd = true;
        endGame();
        return;
      }

      if (usedQuestions.length >= questions.length) {
        endGame();
        return;
      }

      const player = document.querySelector('.player');
      player.classList.add('bounce');
      setTimeout(() => {
        player.style.left = `${boardPositions[currentPosition - 1].x + 25}px`;
        player.style.top = `${boardPositions[currentPosition - 1].y + 25}px`;
        player.classList.remove('bounce');
      }, 300);

      setTimeout(loadQuestion, 1000);
    }

    function endGame() {
      showScreen('end-screen');
      document.getElementById('end-message').textContent = reachedEnd
        ? 'Μπράβο! Ολοκλήρωσες το Παιχνίδι!'
        : 'Μπορείς και καλύτερα, δοκίμασε ξανά!';
      document.getElementById('end-score').textContent = `Συνολικές Σωστές Απαντήσεις: ${correctAnswers}`;
    }
  </script>
</body>
</html>
